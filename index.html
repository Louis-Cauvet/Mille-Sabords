<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter des Joueurs</title>
    <link rel="stylesheet" href="assets/css/style_index.css">
</head>

<body>
    <img src="assets/img/bg_index.jpg" alt="image bg" class="img-bg">
    <div class="title">Milles - Sabord</div>
    <div class="container">
        <div class="box">
            <h1>Ajouter des Joueurs</h1>
            <input type="text" id="playerName" placeholder="Nom du joueur">
            <button id="addPlayerButton" onclick="addPlayer()">Ajouter Joueur</button>
        </div>
        <div class="box">
            <h1>Définir les Points de la Partie</h1>
            <input type="number" id="maxPoints" placeholder="Points maximum" min="1">
            <button id="setPointsButton" onclick="setMaxPoints()">Définir Points</button>
            <div class="points-info" id="pointsInfo">Points maximum: Non défini</div>
        </div>
    </div>
    <img src="assets/img/branche-removebg.png" alt="image branche" class="img-branche-joueur">
    <div class="players-container">
        <div class="player-image-container" id="playerImageContainer"></div>
    </div>
    <div class="pirate-container" id="pirateContainer"></div>
    <button class="create-game" id="createGameButton" onclick="createGame()">Créer la partie</button>

    <script>
        const maxPlayers = 5;
        let players = [];
        let maxPoints = 0;

        function addPlayer() {
            const playerNameInput = document.getElementById('playerName');
            const playerName = playerNameInput.value.trim();

            if (playerName && players.length < maxPlayers) {
                players.push(playerName);
                addPlayerImage(playerName);
                playerNameInput.value = '';
            } else if (!playerName) {
                alert('Veuillez entrer un nom de joueur.');
            } else {
                alert('Nombre maximum de joueurs atteint.');
            }

            if (players.length >= maxPlayers) {
                document.getElementById('addPlayerButton').disabled = true;
            }
        }

        function addPlayerImage(playerName) {
            const playerImageContainer = document.getElementById('playerImageContainer');
            const playerDiv = document.createElement('div');
            playerDiv.className = 'player-image-container-ind';

            const playerImg = document.createElement('img');
            playerImg.src = 'assets/img/pirate_index-removebg-preview.png'; // Utiliser l'image de pirate fixe
            playerImg.alt = 'Pirate';

            const playerLabel = document.createElement('div');
            playerLabel.textContent = playerName;

            playerDiv.appendChild(playerImg);
            playerDiv.appendChild(playerLabel);
            playerImageContainer.appendChild(playerDiv);
        }

        function setMaxPoints() {
            const maxPointsInput = document.getElementById('maxPoints');
            maxPoints = parseInt(maxPointsInput.value);

            if (maxPoints > 0) {
                document.getElementById('pointsInfo').textContent = `Points maximum: ${maxPoints}`;
                maxPointsInput.value = '';
            } else {
                alert('Veuillez entrer un nombre de points valide.');
            }
        }

        function createGame() {
            if (players.length > 0 && maxPoints > 0) {
                const gameData = {
                    players: players,
                    maxPoints: maxPoints
                };
                localStorage.setItem('gameData', JSON.stringify(gameData));
                window.location.href = 'game.html';
            } else {
                alert('Veuillez ajouter des joueurs et définir les points de la partie.');
            }
        }
    </script>
</body>

</html>